<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Calculating DALYs for stochastic or central estimates — stoner_calculate_dalys • stoner</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Calculating DALYs for stochastic or central estimates — stoner_calculate_dalys"><meta property="og:description" content="One modelling group does not provide DALYs, and we need to
calculate those, both for their central estimates (already
uploaded to Montagu), and their stochastic estimates (provided
as CSV files). The DALYs calculation is a simple function of
the life expectancy of people (of a given age and country in a
given year), and various weighted contributions of different burden
outcomes."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">stoner</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.12</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/stoner.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/vimc/stoner/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculating DALYs for stochastic or central estimates</h1>
    <small class="dont-index">Source: <a href="https://github.com/vimc/stoner/blob/HEAD/R/dalys.R" class="external-link"><code>R/dalys.R</code></a></small>
    <div class="hidden name"><code>stoner_calculate_dalys.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>One modelling group does not provide DALYs, and we need to
calculate those, both for their central estimates (already
uploaded to Montagu), and their stochastic estimates (provided
as CSV files). The DALYs calculation is a simple function of
the life expectancy of people (of a given age and country in a
given year), and various weighted contributions of different burden
outcomes.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">stoner_calculate_dalys</span><span class="op">(</span></span>
<span>  <span class="va">con</span>,</span>
<span>  <span class="va">touchstone</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">dalys_params</span>,</span>
<span>  life_table <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  year_min <span class="op">=</span> <span class="fl">2000</span>,</span>
<span>  year_max <span class="op">=</span> <span class="fl">2100</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>con</dt>
<dd><p>DBI connection to a Montagu database. Used for retrieving
demographic data for life expectancy.</p></dd>


<dt>touchstone</dt>
<dd><p>The touchstone (including version); the demographic
data retrieved will be specific to this touchstone.</p></dd>


<dt>data</dt>
<dd><p>A data.frame containing burden estimates - either central or
stochastic. The columns for both kinds will include <code>country</code> (which may be
a Montagu numerical id, or the 3-letter code), <code>year</code>, <code>age</code>, and a number
of burden outcomes.Stochastic data will also have a <code>run_id</code>.</p></dd>


<dt>dalys_params</dt>
<dd><p>A data.frame containing how to calculate dalys; each
row represents a condition, and the four columns describe how to calculate
the cost of that condition across the population in that year. For each
condition, the <code>outcome</code> column must provide a burden outcome (which will
be a column name in <code>data</code>). The <code>proportion</code> is the proportion of people
reported as that outcome, who suffer this condition. <code>average_duration</code> is
the number of years for which the condition is suffered, set to greater
than 120 for a life-long period. And <code>disability_weight</code> is a measure of
how severe the implications are of this particular condition. See
http://ghdx.healthdata.org/record/ihme-data/gbd-2017-disability-weights
for where these figures come from; the final figures are decided in
discussion with the groups.</p></dd>


<dt>life_table</dt>
<dd><p>If <code>NULL</code>, then the life table will be looked up and
interpolated to yearly for age and time. This takes a bit of time, so the
resulting data is part of what this function returns, and the life table
part can be provided here to speed things up. If provided, it should be a
data.frame with the columns <code>value</code> and <code>.code</code>; the latter is in the
format country-year-age. The type of country in <code>.code</code> should match with
the type of the country in <code>data</code>. The years and ages will be interpolated
down to single-years.</p></dd>


<dt>year_min</dt>
<dd><p>The first year of the range in which to calculate DALYs.
(Default 2000)</p></dd>


<dt>year_max</dt>
<dd><p>The final year of the range in which to calculate DALYs.
(Default 2100)</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A list with two named components; <code>life_table</code> is the result of
calling the life-table function, which can then be specified in subsequent
calls to <code>stoner_calculate_dalys</code>, and <code>data</code> is a version of the original
dataset, now with a <code>dalys</code> column. Note that if <code>data</code> already contained
a <code>dalys</code> column when provided to the function, that column will
be overwritten with the new results.</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Wes Hinsley, Rich Fitzjohn, Robert Ashton.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

